<!DOCTYPE html>
<html>
<head>
  <title>Dynamic Form</title>
  <script src="../node_modules/axios/dist/axios.min.js"></script>
</head>
<body>
  <h1 id="form-title"></h1>
  <form id="dynamic-form"></form>
  <button type="submit" form="dynamic-form">Submit</button>

  <script>
    // Replace with your actual API endpoint
    const FORM_API_URL = 'http://localhost:8000/api/forms/1/';

    axios.get(FORM_API_URL)
      .then(response => {
        console.log(response.data)
        const form = response.data;
        document.getElementById('form-title').textContent = form.title;

        const formEl = document.getElementById('dynamic-form');

        form.fields.forEach(field => {
          const wrapper = document.createElement('div');

          const label = document.createElement('label');
          label.textContent = field.label;
          label.htmlFor = `field-${field.id}`;
          wrapper.appendChild(label);

          let input;
          if (field.type === 'select') {
            input = document.createElement('select');
            // Placeholder example option; normally you'd get options from API
            const option = document.createElement('option');
            option.value = '';
            option.text = '-- Select --';
            input.appendChild(option);
          } else {
            input = document.createElement('input');
            input.type = field.type;
            if (field.regex_validation) input.pattern = field.regex_validation;
            if (field.placeholder) input.placeholder = field.placeholder;
          }

          input.id = `field-${field.id}`;
          input.name = field.label;
          input.required = field.required;

          wrapper.appendChild(input);
          formEl.appendChild(wrapper);
        });
      })
      .catch(error => {
        console.error('Failed to fetch form:', error);
      });
  </script>
</body>
</html>
